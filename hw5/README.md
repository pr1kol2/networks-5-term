# HW 5

## Запуск

```py
[SSLKEYLOGFILE=<path>] python3 main.py --mode <{tcp, udp}> --role <{server, client}> --host <host=127.0.0.1> --port <port=9000> [--tls --cert <path> --key <path>]
```

## Протокол

- Сообщение — строка UTF-8, заканчивающаяся на `\n` (автоматически добавляется, если не было).
- Нажатие **Ctrl-C** / **Ctrl-D** завершает локальную сторону.

### TCP

- Устанавливается соединение клиент–сервер.
- Приём ведётся до первого `\n`.
- Поддерживаются длинные строки (≥ 20КБ).
- После разрыва сервер ждёт следующего клиента.

### TLS

- TLS работает только для TCP; для UDP флаги `--tls/--cert/--key` игнорируются.
- Сервер в режиме TLS требует оба аргумента `--cert` и `--key`.
- Клиент в режиме TLS не требует этих аргументов.
- Для логирования сессионных ключей укажите переменную окружения `SSLKEYLOGFILE` на клиенте и на сервере.

### UDP

- Изначально соединения нет; сервер одновременно работает только с одним клиентом.
- Клиент выбирается по первому пришедшему сообщению; остальные игнорируются.
- Клиент при старте шлёт `hi`.
- Освобождение клиента: строка `bye` или отсутствие сообщений в течении 120с.
